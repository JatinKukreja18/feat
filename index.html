<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feat</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="home.css">
    <link href="https://db.onlinewebfonts.com/c/02d8bfeaeb805e69f0b04e0f78697ec3?family=NHaasGroteskDSPro-55Rg" rel="stylesheet" type="text/css"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="./utils.js"></script>
</head>
<body>
    <header>
        <span class="logo"><a href="index.html"><img src="img/feat_artists-logo.png" alt=""></a></span>
        <span class="hamburger-icon"><img src="img/hamburger-icon.svg" alt=""></span>
    </header>
    <main class="">
        <section class="section active" id="slide-1">
            <div class="feat-home-banner gray-box">
                <div class="feat-home-banner-image">
                    <div class="feat-aspect-container">
                        <div class="aspect-4-3">
                            <img src="./img/img3.png" alt="" srcset="" style="z-index:1">
                            <img src="./img/img1.png" alt="" srcset="">
                           <img src="./img/img5.jpeg" alt="" srcset="">
                           <img src="./img/img6.jpeg" alt="" srcset="">
                        </div>
                    </div>
                </div>
                <div class="feat-home-banner-content">
                    <div class="tag">FEATURED</div>
                    <div class="feat-banner-slide-content">
                        <div class="slide-number">
                            <span>1</span>
                            /
                            <span>5</span>
                        </div>
                        <h1 onmouseover="runImageSlideshow(1)" onmouseout="stopImageSlideshow()">Dolly Devi Photographs Indian Artists For Vogue India</h1>
                        <a onmouseover="runImageSlideshow(1)" onmouseout="stopImageSlideshow()">Explore</a>
                    </div>
                </div>
            </div>
        </section>
        <section class="section " id="slide-2">
            <div class="feat-home-banner full">
                <div class="feat-home-banner-image">
                    <img src="./img/download.jpeg" alt="" srcset="" style="z-index:1">

                </div>
                <div class="feat-home-banner-content">
                    <div class="tag">FEATURED</div>
                    <div class="feat-banner-slide-content">
                        <div class="slide-number">
                            <span>2</span>
                            /
                            <span>5</span>
                        </div>
                        <h1 onmouseover="runImageSlideshow(2)" onmouseout="stopImageSlideshow()">Dolly Devi Photographs Indian Artists For Vogue India</h1>
                        <a onmouseover="runImageSlideshow(2)" onmouseout="stopImageSlideshow()">Explore</a>
                    </div>
                </div>
            </div>
        </section>
        <section class="section" id="slide-3">
            <div class="feat-home-banner">
                <div class="feat-home-banner-image">
                 <img src="./img/img1.png" alt="" srcset="" style="z-index:1">
                 <img src="./img/img2.png" alt="" srcset="">
                    <img src="./img/img5.jpeg" alt="" srcset="">
                    <img src="./img/img6.jpeg" alt="" srcset="">
                </div>
                <div class="feat-home-banner-content">
                    <div class="tag">FEATURED</div>
                    <div class="feat-banner-slide-content">
                        <div class="slide-number">
                            <span>3</span>
                            /
                            <span>5</span>
                        </div>
                        <h1 onmouseover="runImageSlideshow(3)" onmouseout="stopImageSlideshow()">Dolly Devi Photographs Indian Artists For Vogue India</h1>
                        <a onmouseover="runImageSlideshow(3)" onmouseout="stopImageSlideshow()">Explore</a>
                    </div>
                </div>
            </div>
        </section>
        <section class="section " id="slide-4">
            <div class="feat-home-banner gray-box">
                <div class="feat-home-banner-image">
                    <div class="feat-aspect-container">
                        <div class="aspect-4-3">
                            <img src="./img/img6.jpeg" alt="" srcset="" style="z-index:1">
                            <img src="./img/img1.png" alt="" srcset="">
                           <img src="./img/img5.jpeg" alt="" srcset="">
                           <img src="./img/img4.jpeg" alt="" srcset="">
                        </div>
                    </div>
                </div>
                <div class="feat-home-banner-content">
                    <div class="tag">FEATURED</div>
                    <div class="feat-banner-slide-content">
                        <div class="slide-number">
                            <span>4</span>
                            /
                            <span>5</span>
                        </div>
                        <h1 onmouseover="runImageSlideshow(4)" onmouseout="stopImageSlideshow()">Dolly Devi Photographs Indian Artists For Vogue India</h1>
                        <a onmouseover="runImageSlideshow(4)"  onmouseout="stopImageSlideshow()">Explore</a>
                    </div>
                </div>
            </div>
        </section>
        <section class="section static" id="slide-5">
            <div class="feat-home-banner">
                <div class="feat-home-banner-image">
                 <img src="./img/img1.png" alt="" srcset="" style="z-index:1">
                 <img src="./img/img2.png" alt="" srcset="">
                    <img src="./img/img5.jpeg" alt="" srcset="">
                    <img src="./img/img6.jpeg" alt="" srcset="">
                </div>
                <div class="feat-home-banner-content">
                    <div class="tag">NEWLY LAUNCHED</div>
                    <div class="feat-banner-slide-content">
                        <div class="slide-number">
                            <span>5</span>
                            /
                            <span>5</span>
                        </div>
                        <h1 onmouseover="runImageSlideshow(3)" onmouseout="stopImageSlideshow()">Dolly Devi Photographs Indian Artists For Vogue India</h1>
                        <a onmouseover="runImageSlideshow(3)" onmouseout="stopImageSlideshow()">Explore</a>
                    </div>
                </div>
            </div>
        </section>
        <!-- <section class="section static">
          <h1>Boring</h1>
        </section>
        <section class="section parallax bg2">
          <h1>Fluffy Kitten</h1>
        </section> -->
      </main>
    <footer>
        <ul>
            <li class="grey mb10">Models</li>
            <li>Boys</li>
            <li>Girls</li>
            <li>Other</li>
        </ul>
        <ul>
            <li class="grey mb10">Talents</li>
            <li>Art and design</li>
            <li>Hair and makeup</li>
            <li>Photographer</li>
            <li>Stylist</li>
            <li>Videographer</li>
        </ul>
        <ul>
            <li class="grey mb10">Projects</li>
            <li>Casting</li>
            <li>Digital campaigns</li>
            <li>Recruitment</li>
        </ul>
        <ul>
            <li class="grey mb10">Contact</li>
            <li>Enquire now</li>
            <li class="mb10">Become a model</li>
            <li class="grey desk-only">About</li>
        </ul>
        <ul class="mob-only">
            <li class="grey mb10">About</li>
        </ul>
        <ul class="ml-auto">
            <li class="mb10 grey">Follow us on </li>
            <li class="social-icons">
                <span><img src="img/insta.svg" alt=""></span>
                <span><img src="img/tumblr.svg" alt=""></span>
                <span><img src="img/youtube.svg" alt=""></span>
            </li>
        </ul>
    </footer>
    <script>
        lastScrollTop = 0
        $(document).ready(function(){
            $(window).on('scroll',function(e){
                if($(window).scrollTop() > lastScrollTop){
                    goingDown = true;
                    
                    // $(window).scrollTop($('.section:not(.active)')[0].offsetTop)
                    // $("html, body").animate({ scrollTop: $('.section:not(.active)')[0].offsetTop }, 600);
                    // $('.section:not(.active)').css('margin-top',0)
                    // $('.section:not(.active)').first().addClass('active')
                    // $('.section:not(.active)').first().css('margin-top',(($('.section.active').length * 100) + 'vh'))
                    // console.log('came here');
                    // e.stopPropagation();
                }else{
                    goingDown = false;
                }
                lastScrollTop = $(window).scrollTop();
                if($('.section:not(.active):not(.static').length){
                    if($(window).scrollTop() > $('.section:not(.active)').first().offset().top){
                        $('.section:not(.active)').css('margin-top',0)
                        $('.section:not(.active)').first().addClass('active')
                        $('.section:not(.active)').first().css('margin-top',(($('.section.active').length * 100) + 'vh'))
                    }
                }
                if(!goingDown && $('.section.active').length > 1){
                    console.log(goingDown);
                    if($(window).scrollTop() <= $('.section:not(.active)').first().offset().top - $(window).height()){
                        $('.section.active').last().removeClass('active')
                        $('.section:not(.active)').first().css('margin-top',(($('.section.active').length * 100) + 'vh'))
                       // $('.section:not(.active)').css('margin-top',0)
                   }
                }
                // else{
                //     $('.section:not(.active)').first().removeClass('active')
                // }
            })



            // window.addEventListener('scroll',scrollHandler);
            // window.addEventListener(wheelEvent, throttle(scrollHandler, 300));
            // window.addEventListener('keydown', keyDownHandler);
            
            var scrollTimer = -1;
            var isScrolledFinished = false;
            function scrollHandler(e){
                // console.log(e.preventDefault);

                // if (scrollTimer != -1)
                //     clearTimeout(scrollTimer);
                    
                // scrollTimer = window.setTimeout(scrollFinished, 300);
                changeActiveSlide('down');
                
                // if (window.innerWidth > 767) {
                    // }
            }
            $(window).one('scroll',function() {
                // Stuff
                console.log('working once');
                changeActiveSlide(goingDown);
            });
            function reinitiateSingleScroll(){
                $(window).one('scroll',function() {
                    // Stuff
                    changeActiveSlide(goingDown);
                    console.log('working twice');
                });
            }
            // function scrollFinished() {
            //     console.log(isScrolledFinished);
            //     isScrolledFinished = true;
            //     if( $(window).scrollTop() != $('section:not(.active)').first().offset().top){
            //     }
            // }
            function changeActiveSlide(direction){
                if(window.pageYOffset < $('section.static').first().offset().top){
                        if(direction){
                            console.log(direction);
                            $("html, body").animate({ scrollTop: $('section:not(.active)').first().offset().top }, 300,function(){
                                console.log('animation stopped');
                            });
                            $('html body').css('overflow','hidden')
                            setTimeout(function() {
                                $('html body').css('overflow','auto')
                                reinitiateSingleScroll();
                            }, 800);
                        }
                        if(direction == false){
                            $("html, body").animate({ scrollTop: $('section:not(.active)').first().offset().top - $(window).height() }, 300,function(){
                                console.log('animation stopped');
                            
                            });
                            $('html body').css('overflow','hidden')
                            setTimeout(function() {
                                $('html body').css('overflow','auto')
                                reinitiateSingleScroll();
                            }, 800);
                        }
                }else{
                    reinitiateSingleScroll();
                }
            }
        })


        


        var imgTimer;
        function stopImageSlideshow(id){
            clearInterval(imgTimer)
        }
        function runImageSlideshow(id){
            const length = $('#slide-'+id + ' .feat-home-banner-image img').length;
            count = 1;
            imgTimer = setInterval(function(){
                if(count===length){
                    count = 0;
                    // $('#slide-'+id + ' .feat-home-banner-image img').css('z-index','0');
                    // $('#slide-'+id + ' .feat-home-banner-image img')[0].style.zIndex = 1;
                    
                }
                $('#slide-'+id + ' .feat-home-banner-image img').css('z-index','0');
                $('#slide-'+id + ' .feat-home-banner-image img')[count].style.zIndex = 1;
                count +=1;
            
            },500)
        }
    </script>
</body>
</html>
